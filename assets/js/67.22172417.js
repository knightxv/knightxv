(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{388:function(s,a,t){"use strict";t.r(a);var n=t(4),r=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"七、镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七、镜像仓库"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#%E4%B8%83%E3%80%81%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93"}},[s._v("#")]),s._v(" 七、镜像仓库")]),s._v(" "),a("h2",{attrs:{id:"_1、docker-hub"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、docker-hub"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#_1%E3%80%81docker-hub"}},[s._v("#")]),s._v(" 1、docker hub")]),s._v(" "),a("ul",[a("li",[s._v("注册 docker hub 并登录")]),s._v(" "),a("li",[s._v("可以创建一个仓库，选为 public")]),s._v(" "),a("li",[s._v("docker push knigthxv/mynginx:tagname")]),s._v(" "),a("li",[s._v("docker hub 一个完整镜像的全路径是")]),s._v(" "),a("li",[s._v("docker.io/library/redis:alpine3.13 我们的 docker.io/knigthxv/mynginx:tagname")]),s._v(" "),a("li",[s._v("docker images 的时候镜像缩略了全名 默认官方镜像没有 docker.io/library/")]),s._v(" "),a("li",[s._v("docker.io/ rediscommander / redis-commander:latest")]),s._v(" "),a("li",[s._v("docker.io/knigthxv/mynginx:v4 我的镜像的全称")]),s._v(" "),a("li",[s._v("登录远程 docker 仓库")]),s._v(" "),a("li",[s._v("当前会话登录以后 docker login 。所有的东西都会 push 到这个人的仓库")]),s._v(" "),a("li",[s._v("docker push knigthxv/mynginx:tagname")]),s._v(" "),a("li",[s._v("上面命令的完整版 docker push docker.io/knigthxv/mynginx:v4")]),s._v(" "),a("li",[s._v("怎么知道是否登录了 cat ~/.docker/config.json 有没有 auth 的值，没有就是没有登录")]),s._v(" "),a("li",[s._v("docker hub 太慢了，用阿里云的镜像仓库，或者以后的 habor 仓库")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" tag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ImageId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" registry.cn-hangzhou.aliyuncs.com/knigthxv/mynginx:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("镜像版sudo "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push registry.cn-hangzhou.aliyuncs.com/knigthxv/mynginx:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("镜\n像版本号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n仓库网址/名称空间"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("knigthxv/knigthxv_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/仓库名:版本号\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_2、阿里云仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、阿里云仓库"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#_2%E3%80%81%E9%98%BF%E9%87%8C%E4%BA%91%E4%BB%93%E5%BA%93"}},[s._v("#")]),s._v(" 2、阿里云仓库")]),s._v(" "),a("h3",{attrs:{id:"_1、进入阿里云控制台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、进入阿里云控制台"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#_1%E3%80%81%E8%BF%9B%E5%85%A5%E9%98%BF%E9%87%8C%E4%BA%91%E6%8E%A7%E5%88%B6%E5%8F%B0"}},[s._v("#")]),s._v(" 1、进入阿里云控制台")]),s._v(" "),a("p",[s._v("https://cr.console.aliyun.com/cn-hangzhou/instances")]),s._v(" "),a("h3",{attrs:{id:"_2、新建命名空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、新建命名空间"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#_2%E3%80%81%E6%96%B0%E5%BB%BA%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"}},[s._v("#")]),s._v(" 2、新建命名空间")]),s._v(" "),a("h3",{attrs:{id:"_3、新建镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、新建镜像仓库"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#_3%E3%80%81%E6%96%B0%E5%BB%BA%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93"}},[s._v("#")]),s._v(" 3、新建镜像仓库")]),s._v(" "),a("h3",{attrs:{id:"_4、登录阿里云-docker-registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、登录阿里云-docker-registry"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#_4%E3%80%81%E7%99%BB%E5%BD%95%E9%98%BF%E9%87%8C%E4%BA%91docker-registry"}},[s._v("#")]),s._v(" 4、登录阿里云 Docker Registry")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" login "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--username")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("knigthxvqimiao2 registry.cn-hangzhou.aliyuncs.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_5、将镜像推送到-registry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、将镜像推送到-registry"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#_5%E3%80%81%E5%B0%86%E9%95%9C%E5%83%8F%E6%8E%A8%E9%80%81%E5%88%B0registry"}},[s._v("#")]),s._v(" 5、将镜像推送到 Registry")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" tag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ImageId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" registry.cn-hangzhou.aliyuncs.com/knigthxv_app/jenkins:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("镜像版本号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push registry.cn-hangzhou.aliyuncs.com/knigthxv_app/jenkins:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("镜像版本号"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 实例")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\nREPOSITORY                        TAG       \tIMAGE ID     \t\tCREATED        VIRTUAL SIZE\nregistry.aliyuncs.com/acs/agent  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.7")]),s._v("-dfb6816  37bb9c63c8b2        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" days ago          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37.89")]),s._v(" MB\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" tag 37bb9c63c8b2 registry-vpc.cn-hangzhou.aliyuncs.com/acs/agent:0.7-dfb6816\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push registry-vpc.cn-hangzhou.aliyuncs.com/acs/agent:0.7-dfb6816\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);